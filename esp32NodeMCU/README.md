This AWS IoT demo is based off of an AWS Workshop:

video: https://www.youtube.com/watch?v=4hdA3XSb3-A
workshop: https://catalog.us-east-1.prod.workshops.aws/workshops/5b127b2f-f879-48b9-9dd0-35aff98c7bbc/en-US/module3/configure-esp32